<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Tasks
    </title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
    <link rel="stylesheet" href="../style.css" />
</head>

<body>
    <div id="navbar">
        <div class="nav-left-area">
            <button class="hamburger" onclick="document.getElementById('sidebar').classList.toggle('open')">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <a href="/index.html">Roku Guide</a>
        </div>
        <a href="https://github.com/rokucommunity/roku-guide" target="_blank" title="View project on GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" style="fill: white" width="24" height="24" viewBox="0 0 24 24">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
            </svg>
        </a>
    </div>
    <div id="body-area">
        <div id="sidebar">

            
            
            <div class="folder">
                
                
                <div class="children">
                    
            
            <a class="entry" href="../index.html">Introduction</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="../component-libraries.html">Component Libraries</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <div class="folder">
                
                <a class="name entry" href="">Performance</a>
                
                
                <div class="children">
                    
            
            <a class="entry" href="index.html">Introduction</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="associative-arrays-and-nodes.html">Associative Arrays and Nodes</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="cpus.html">CPUs</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="registry.html">Registry</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="tasks.html">Tasks</a>
            
            
                </div>
                
            </div>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="../seamless-multi-segment-hls-videos.html">Seamless Multi-Segment Videos (HLS)</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <div class="folder">
                
                <a class="name entry" href="../Structure">Structure</a>
                
                
                <div class="children">
                    
            
            <a class="entry" href="../Structure/pattern.html">Pattern</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="../Structure/singleton-and-globals.html">Singleton</a>
            
            
                </div>
                
            </div>
            
            
                </div>
                
                <div class="children">
                    
            
            <div class="folder">
                
                <a class="name entry" href="../UI">UI</a>
                
                
                <div class="children">
                    
            
            <a class="entry" href="../UI/round-corners.html">Round corners</a>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="../UI/shadows.html">Shadows</a>
            
            
                </div>
                
            </div>
            
            
                </div>
                
                <div class="children">
                    
            
            <a class="entry" href="../contributing.html">Contributing</a>
            
            
                </div>
                
            </div>
            
            

            
        </div>
        <div id="content">
            <a href="#tasks"><h1 id="tasks">Tasks</h1></a><p>Tasks are required for some items such as HTTP operations, and are good for other slow operations such as registry flushes.  They are also good for repeated timed operations such as regular configuration updates.  </p>
<p>But tasks threads are dramatically slower than the render thread.  I have heard numbers as high as a 10:1 difference in speed, although my benchmark tests showed about a 6:1 difference.  Using tasks is good for offloading operations of the render thread, and in some cases, like the HTTP mentioned above, required.  However, always consider the performance cost of relying on tasks too much for heavy processing or parsing.</p>
<p>When using tasks, rendezvous are the automatic synchronization system of BrightScript when moving variables between the task and other threads, and should be minimized. The cost has been greatly decreased from earlier version of BrightScript, but still is not free. The [BrightScript Language] extension for VSCode has a dedicated rendezvous tracking section to visualize your rendezvous counts and times. Rendezvous occurrences can be reduced by using parameters, hoisting variables, and refactoring if needed.  A goal of zero rendezvous is unrealistic, but getting as close to minimal as possible is not.</p>
<p>RAF must run as a task, and has a high rendezvous count and appears to be unavoidable. </p>
<p>Finally, BrightScript has limits on the number of active tasks. 50 active tasks will generate a warning, and 100 will shut down a channel.  Using permanent tasks with field observers allows a single task to process repeated requests, and can help in minimizing the number of tasks.  These long-lived tasks can even include multiple observed fields that trigger various functions.  The task will process the observed triggers one at a time, in the order they are received.</p>
            <div id="footer"></div>
        </div>
    </div>
    <script>hljs.highlightAll();</script>
</body>

</html>